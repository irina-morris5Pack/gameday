{"version":3,"sources":["../../src/util/cursors.ts"],"names":["formatCursorChunk","formatPrismaCursor","cursorFormatter","parsePrismaCursor","parseID","getDefaultIDSerializer","getDefaultIDParser","serializeID","parseCompositeCursor","prismaCursorConnectionQuery","wrapConnectionResult","resolvePrismaCursorConnection","getCursorFormatter","getCursorParser","DEFAULT_MAX_SIZE","DEFAULT_SIZE","value","Date","String","Number","TypeError","record","fields","encodeBase64","JSON","stringify","map","name","cursor","decoded","decodeBase64","type","match","parseInt","parse","BigInt","Error","id","dataType","parseFloat","Buffer","from","modelName","fieldName","builder","model","getModel","field","find","f","parent","primaryKey","join","n","kind","idx","index","uniqueIndexes","parts","Array","isArray","result","i","length","toString","parsed","forEach","args","ctx","maxSize","defaultSize","parseCursor","before","after","first","last","maxSizeForConnection","defaultSizeForConnection","take","Math","min","skip","results","totalCount","resolveNode","edges","gotFullResults","abs","hasNextPage","hasPreviousPage","nodes","slice","node","pageInfo","startCursor","endCursor","options","resolve","query","modelData","uniqueIndex","parser","rawCursor"],"mappings":"AAAA,oCAAoC,GACpC;;;;;;;;;;;IAOgBA,iBAAiB,MAAjBA;IAiBAC,kBAAkB,MAAlBA;IAIAC,eAAe,MAAfA;IAUAC,iBAAiB,MAAjBA;IA6BAC,OAAO,MAAPA;IA6BAC,sBAAsB,MAAtBA;IA4BAC,kBAAkB,MAAlBA;IA8CAC,WAAW,MAAXA;IAWAC,oBAAoB,MAApBA;IA+BAC,2BAA2B,MAA3BA;IAiDAC,oBAAoB,MAApBA;IA0CMC,6BAA6B,MAA7BA;IAcNC,kBAAkB,MAAlBA;IAkBAC,eAAe,MAAfA;;sBA/UsD;2BAC7C;AAGzB,MAAMC,mBAAmB;AACzB,MAAMC,eAAe;AAEd,SAASf,kBAAkBgB,KAAc,EAAE;IAChD,IAAIA,iBAAiBC,MAAM;QACzB,OAAO,CAAC,EAAE,EAAEC,OAAOC,OAAOH,QAAQ,CAAC;IACrC,CAAC;IAED,OAAQ,OAAOA;QACb,KAAK;YACH,OAAO,CAAC,EAAE,EAAEA,MAAM,CAAC;QACrB,KAAK;YACH,OAAO,CAAC,EAAE,EAAEA,MAAM,CAAC;QACrB,KAAK;YACH,OAAO,CAAC,EAAE,EAAEA,MAAM,CAAC;QACrB;YACE,MAAM,IAAII,UAAU,CAAC,wBAAwB,EAAE,OAAOJ,MAAM,CAAC,EAAE;IACnE;AACF;AAEO,SAASf,mBAAmBoB,MAA+B,EAAEC,MAAyB,EAAE;IAC7F,OAAOpB,gBAAgBoB,QAAQD;AACjC;AAEO,SAASnB,gBAAgBoB,MAAyB,EAAE;IACzD,OAAO,CAACN,QAAmC;QACzC,IAAI,OAAOM,WAAW,UAAU;YAC9B,OAAOC,IAAAA,kBAAY,EAAC,CAAC,IAAI,EAAEvB,kBAAkBgB,KAAK,CAACM,OAAO,EAAE,CAAC;QAC/D,CAAC;QAED,OAAOC,IAAAA,kBAAY,EAAC,CAAC,MAAM,EAAEC,KAAKC,SAAS,CAACH,OAAOI,GAAG,CAAC,CAACC,OAASX,KAAK,CAACW,KAAK,GAAG,CAAC;IAClF;AACF;AAEO,SAASxB,kBAAkByB,MAAe,EAAE;IACjD,IAAI,OAAOA,WAAW,UAAU;QAC9B,MAAM,IAAIR,UAAU,2BAA2B;IACjD,CAAC;IAED,IAAI;QACF,MAAMS,UAAUC,IAAAA,kBAAY,EAACF;QAC7B,MAAM,GAAGG,MAAMf,MAAM,GAAGa,QAAQG,KAAK,CAAC;QAEtC,OAAQD;YACN,KAAK;gBACH,OAAOf;YACT,KAAK;gBACH,OAAOG,OAAOc,QAAQ,CAACjB,OAAO;YAChC,KAAK;gBACH,OAAO,IAAIC,KAAKE,OAAOc,QAAQ,CAACjB,OAAO;YACzC,KAAK;gBACH,OAAOQ,KAAKU,KAAK,CAAClB;YACpB,KAAK;gBACH,oEAAoE;gBACpE,OAAOmB,OAAOnB;YAChB;gBACE,MAAM,IAAII,UAAU,CAAC,oBAAoB,EAAEW,KAAK,CAAC,EAAE;QACvD;IACF,EAAE,OAAM;QACN,MAAM,IAAIK,MAAM,CAAC,gBAAgB,EAAER,OAAO,CAAC,EAAE;IAC/C;AACF;AAEO,SAASxB,QAAQiC,EAAU,EAAEC,QAAgB,EAAW;IAC7D,IAAI,CAACD,IAAI;QACP,OAAOA;IACT,CAAC;IAED,OAAQC;QACN,KAAK;YACH,OAAOD;QACT,KAAK;YACH,OAAOlB,OAAOc,QAAQ,CAACI,IAAI;QAC7B,KAAK;YACH,oEAAoE;YACpE,OAAOF,OAAOE;QAChB,KAAK;YACH,OAAOA,OAAO;QAChB,KAAK;QACL,KAAK;YACH,OAAOlB,OAAOoB,UAAU,CAACF;QAC3B,KAAK;YACH,OAAO,IAAIpB,KAAKoB;QAClB,KAAK;YACH,OAAOb,KAAKU,KAAK,CAACG;QACpB,KAAK;YACH,OAAOG,OAAOC,IAAI,CAACJ,IAAI;QACzB;YACE,OAAOA;IACX;AACF;AAEO,SAAShC,uBACdqC,SAAiB,EACjBC,SAAiB,EACjBC,OAA+C,EACD;QASzCC,mBAA0BA;IAR/B,MAAMA,QAAQC,IAAAA,mBAAQ,EAACJ,WAAWE;IAElC,MAAMG,QAAQF,MAAMvB,MAAM,CAAC0B,IAAI,CAAC,CAACC,IAAMA,EAAEtB,IAAI,KAAKgB;IAElD,IAAII,OAAO;QACT,OAAO,CAACG,SAAW3C,YAAY2C,MAAM,CAACP,UAAU,EAAEI,MAAMhB,IAAI;IAC9D,CAAC;QAEIc;IAAL,IAAI,AAACA,CAAAA,CAAAA,yBAAAA,CAAAA,oBAAAA,MAAMM,UAAU,cAAhBN,+BAAAA,KAAAA,IAAAA,kBAAkBlB,IAAI,cAAtBkB,oCAAAA,yBAA0BA,CAAAA,qBAAAA,MAAMM,UAAU,cAAhBN,gCAAAA,KAAAA,IAAAA,mBAAkBvB,OAAO8B,IAAI,CAAC,IAAI,AAAD,MAAOT,WAAW;QAChF,MAAMrB,SAASuB,MAAMM,UAAU,CAAE7B,MAAM,CAACI,GAAG,CAAC,CAAC2B,IAAMR,MAAMvB,MAAM,CAAC0B,IAAI,CAAC,CAACC,IAAMA,EAAEtB,IAAI,KAAK0B;QACvF,OAAO,CAACH,SAAW1B,KAAKC,SAAS,CAACH,OAAOI,GAAG,CAAC,CAACuB,IAAM1C,YAAY2C,MAAM,CAACD,EAAEtB,IAAI,CAAC,EAAEsB,EAAEK,IAAI;IACxF,CAAC;QAEgDC;IAAjD,MAAMC,QAAQX,MAAMY,aAAa,CAACT,IAAI,CAAC,CAACO,MAAQ,AAACA,CAAAA,CAAAA,YAAAA,IAAI5B,IAAI,cAAR4B,uBAAAA,YAAYA,IAAIjC,MAAM,CAAC8B,IAAI,CAAC,IAAI,AAAD,MAAOT;IAEvF,IAAIa,OAAO;QACT,MAAMlC,UAASkC,MAAMlC,MAAM,CAACI,GAAG,CAAC,CAAC2B,IAAMR,MAAMvB,MAAM,CAAC0B,IAAI,CAAC,CAACC,IAAMA,EAAEtB,IAAI,KAAK0B;QAC3E,OAAO,CAACH,SAAW1B,KAAKC,SAAS,CAACH,QAAOI,GAAG,CAAC,CAACuB,IAAM1C,YAAY2C,MAAM,CAACD,EAAEtB,IAAI,CAAC,EAAEsB,EAAEK,IAAI;IACxF,CAAC;IAED,MAAM,IAAIlB,MAAM,CAAC,eAAe,EAAEO,UAAU,WAAW,EAAED,UAAU,CAAC,EAAE;AACxE;AAEO,SAASpC,mBACdoC,SAAiB,EACjBC,SAAiB,EACjBC,OAA+C,EACtB;QAepBC,mBAA0BA;IAd/B,IAAI,CAACF,WAAW;QACd,MAAM,IAAIP,MAAM,sBAAsB;IACxC,CAAC;IACD,MAAMS,QAAQC,IAAAA,mBAAQ,EAACJ,WAAWE;IAElC,MAAMG,QAAQF,MAAMvB,MAAM,CAAC0B,IAAI,CAAC,CAACC,IAAMA,EAAEtB,IAAI,KAAKgB;IAElD,IAAII,OAAO;QACT,OAAO,CAACV,KAAOjC,QAAQiC,IAAIU,MAAMhB,IAAI;IACvC,CAAC;QAEgDwB;IAAjD,MAAMC,QAAQX,MAAMY,aAAa,CAACT,IAAI,CAAC,CAACO,MAAQ,AAACA,CAAAA,CAAAA,YAAAA,IAAI5B,IAAI,cAAR4B,uBAAAA,YAAYA,IAAIjC,MAAM,CAAC8B,IAAI,CAAC,IAAI,AAAD,MAAOT;IAEvF,IAAIrB;QACCuB;IAAL,IAAI,AAACA,CAAAA,CAAAA,yBAAAA,CAAAA,oBAAAA,MAAMM,UAAU,cAAhBN,+BAAAA,KAAAA,IAAAA,kBAAkBlB,IAAI,cAAtBkB,oCAAAA,yBAA0BA,CAAAA,qBAAAA,MAAMM,UAAU,cAAhBN,gCAAAA,KAAAA,IAAAA,mBAAkBvB,OAAO8B,IAAI,CAAC,IAAI,AAAD,MAAOT,WAAW;QAChFrB,SAASuB,MAAMM,UAAU,CAAE7B,MAAM,CAACI,GAAG,CAAC,CAAC2B,IAAMR,MAAMvB,MAAM,CAAC0B,IAAI,CAAC,CAACC,IAAMA,EAAEtB,IAAI,KAAK0B;IACnF,OAAO,IAAIG,OAAO;QAChBlC,SAASkC,MAAMlC,MAAM,CAACI,GAAG,CAAC,CAAC2B,IAAMR,MAAMvB,MAAM,CAAC0B,IAAI,CAAC,CAACC,IAAMA,EAAEtB,IAAI,KAAK0B;IACvE,CAAC;IAED,IAAI,CAAC/B,QAAQ;QACX,MAAM,IAAIc,MAAM,CAAC,eAAe,EAAEO,UAAU,WAAW,EAAED,UAAU,CAAC,EAAE;IACxE,CAAC;IAED,OAAO,CAACL,KAAO;QACb,MAAMqB,QAAQlC,KAAKU,KAAK,CAACG;QAEzB,IAAI,CAACsB,MAAMC,OAAO,CAACF,QAAQ;YACzB,MAAM,IAAItC,UAAU,CAAC,wBAAwB,EAAEuB,UAAU,IAAI,EAAED,UAAU,CAAC,EAAE;QAC9E,CAAC;QAED,MAAMmB,SAAkC,CAAC;QAEzC,IAAK,IAAIC,IAAI,GAAGA,IAAIxC,OAAQyC,MAAM,EAAED,KAAK,EAAG;YAC1CD,MAAM,CAACvC,MAAO,CAACwC,EAAE,CAACnC,IAAI,CAAC,GAAGvB,QAAQsD,KAAK,CAACI,EAAE,EAAYxC,MAAO,CAACwC,EAAE,CAAC/B,IAAI;QACvE;QAEA,OAAO8B;IACT;AACF;AAEO,SAAStD,YAAY8B,EAAW,EAAEC,QAAgB,EAAE;IACzD,OAAQA;QACN,KAAK;YACH,OAAOd,KAAKC,SAAS,CAACY;QACxB,KAAK;YACH,OAAO,AAACA,GAAc2B,QAAQ,CAAC;QACjC;YACE,OAAO9C,OAAOmB;IAClB;AACF;AAEO,SAAS7B,qBAAqBc,MAAgB,EAAE;IACrD,OAAO,CAACM,SAAoB;QAC1B,MAAMqC,SAAS9D,kBAAkByB;QAEjC,IAAI,CAAC+B,MAAMC,OAAO,CAACK,SAAS;YAC1B,MAAM,IAAI7C,UAAU,CAAC,sDAAsD,EAAE6C,OAAO,CAAC,EAAE;QACzF,CAAC;QAED,MAAM5C,SAAkC,CAAC;QAEzCC,OAAO4C,OAAO,CAAC,CAACnB,OAAOe,IAAM;YAC3BzC,MAAM,CAAC0B,MAAM,GAAGkB,MAAM,CAACH,EAAE;QAC3B;QAEA,OAAOzC;IACT;AACF;AAeO,SAASZ,4BAA4B,EAC1C0D,KAAI,EACJC,IAAG,EACHC,SAAUvD,iBAAgB,EAC1BwD,aAAcvD,aAAY,EAC1BwD,YAAW,EACwB,EAAE;IACrC,MAAM,EAAEC,OAAM,EAAEC,MAAK,EAAEC,MAAK,EAAEC,KAAI,EAAE,GAAGR;IACvC,IAAIO,SAAS,IAAI,IAAIA,QAAQ,GAAG;QAC9B,MAAM,IAAItD,UAAU,mDAAmD;IACzE,CAAC;IAED,IAAIuD,QAAQ,IAAI,IAAIA,OAAO,GAAG;QAC5B,MAAM,IAAIvC,MAAM,kDAAkD;IACpE,CAAC;IAED,IAAIoC,UAAUC,OAAO;QACnB,MAAM,IAAIrC,MAAM,qEAAqE;IACvF,CAAC;IAED,IAAIoC,UAAU,IAAI,IAAIE,SAAS,IAAI,EAAE;QACnC,MAAM,IAAItC,MAAM,qEAAqE;IACvF,CAAC;IAED,IAAIqC,SAAS,IAAI,IAAIE,QAAQ,IAAI,EAAE;QACjC,MAAM,IAAIvC,MAAM,mEAAmE;IACrF,CAAC;IAED,MAAMR,SAAS4C,mBAAAA,oBAAAA,SAAUC,KAAK;IAE9B,MAAMG,uBAAuB,OAAOP,YAAY,aAAaA,QAAQF,MAAMC,OAAOC,OAAO;IACzF,MAAMQ,2BACJ,OAAOP,gBAAgB,aAAaA,YAAYH,MAAMC,OAAOE,WAAW;QAEtDI;IAApB,IAAII,OAAOC,KAAKC,GAAG,CAACN,CAAAA,OAAAA,kBAAAA,mBAAAA,QAASC,IAAI,cAAbD,kBAAAA,OAAiBG,wBAAwB,EAAED,wBAAwB;IAEvF,IAAIJ,QAAQ;QACVM,OAAO,CAACA;IACV,CAAC;IAED,OAAOlD,UAAU,IAAI,GACjB;QAAEkD;QAAMG,MAAM;IAAE,IAChB;QACErD,QAAQ2C,YAAY3C;QACpBkD;QACAG,MAAM;IACR,CAAC;AACP;AAEO,SAASvE,qBACdwE,OAAY,EACZf,IAAkD,EAClDW,IAAY,EACZlD,MAA2B,EAC3BuD,UAAyD,EACzDC,WAAwC,EACxC;QA2BiBC,SACFA;IA3Bf,MAAMC,iBAAiBJ,QAAQnB,MAAM,KAAKgB,KAAKQ,GAAG,CAACT;IACnD,MAAMU,cAAcrB,KAAKK,MAAM,GAAG,IAAI,GAAGc,cAAc;IACvD,MAAMG,kBAAkBtB,KAAKM,KAAK,GAAG,IAAI,GAAGN,KAAKK,MAAM,GAAGc,iBAAiB,KAAK;IAChF,MAAMI,QAAQJ,iBACVJ,QAAQS,KAAK,CAACb,OAAO,IAAI,IAAI,CAAC,EAAEA,OAAO,IAAII,QAAQnB,MAAM,GAAG,CAAC,CAAC,IAC9DmB,OAAO;IAEX,MAAMG,QAAQK,MAAMhE,GAAG,CAAC,CAACV,OAAOwC,QAC9BxC,SAAS,IAAI,GACT,IAAI,GACJoE,cACA;YACE,GAAGpE,KAAK;YACRY,QAAQA,OAAOZ;YACf4E,MAAMR,YAAYpE;QACpB,IACA;YACEY,QAAQA,OAAOZ;YACf4E,MAAM5E;QACR,CAAC;IAGP,OAAO;QACLmE;QACAE;QACAQ,UAAU;YACRC,aAAaT,CAAAA,UAAAA,KAAK,CAAC,EAAE,cAARA,qBAAAA,KAAAA,IAAAA,QAAUzD,MAAM;YAC7BmE,WAAWV,CAAAA,WAAAA,KAAK,CAACA,MAAMtB,MAAM,GAAG,EAAE,cAAvBsB,sBAAAA,KAAAA,IAAAA,SAAyBzD,MAAM;YAC1C6D;YACAD;QACF;IACF;AACF;AAEO,eAAe7E,8BACpBqF,OAA6C,EAC7CpE,MAA2B,EAC3BqE,OAAgG,EAChG;IACA,MAAMC,QAAQzF,4BAA4BuF;IAC1C,MAAMd,UAAU,MAAMe,QAAQ;QAC5B,GAAGD,QAAQE,KAAK;QAChB,GAAGA,KAAK;IACV;IAEA,OAAOxF,qBAAqBwE,SAASc,QAAQ7B,IAAI,EAAE+B,MAAMpB,IAAI,EAAElD,QAAQoE,QAAQb,UAAU;AAC3F;AAEO,SAASvE,mBACde,IAAY,EACZiB,OAA+C,EAC/ChB,MAAc,EACd;QAEmBuE,uBAA8BA;IADjD,MAAMA,YAAYrD,IAAAA,mBAAQ,EAACnB,MAAMiB;QACduD;IAAnB,MAAMhD,aAAagD,CAAAA,6BAAAA,CAAAA,wBAAAA,UAAUhD,UAAU,cAApBgD,mCAAAA,KAAAA,IAAAA,sBAAsBxE,IAAI,cAA1BwE,wCAAAA,6BAA8BA,CAAAA,yBAAAA,UAAUhD,UAAU,cAApBgD,oCAAAA,KAAAA,IAAAA,uBAAsB7E,OAAO8B,IAAI,CAAC,IAAI;IACvF,IAAID,eAAevB,QAAQ;QACzB,OAAO1B,gBAAgBiG,UAAUhD,UAAU,CAAE7B,MAAM;IACrD,CAAC;QAGWiC;IADZ,MAAM6C,cAAcD,UAAU1C,aAAa,CAACT,IAAI,CAC9C,CAACO,MAAQ,AAACA,CAAAA,CAAAA,YAAAA,IAAI5B,IAAI,cAAR4B,uBAAAA,YAAYA,IAAIjC,MAAM,CAAC8B,IAAI,CAAC,IAAI,AAAD,MAAOxB;QAG3BwE;IAAvB,OAAOlG,gBAAgBkG,CAAAA,sBAAAA,wBAAAA,yBAAAA,KAAAA,IAAAA,YAAa9E,MAAM,cAAnB8E,iCAAAA,sBAAuBxE,MAAM;AACtD;AAEO,SAASf,gBACdc,IAAY,EACZiB,OAA+C,EAC/ChB,MAAc,EACd;QAEmBuE,uBAA8BA;IADjD,MAAMA,YAAYrD,IAAAA,mBAAQ,EAACnB,MAAMiB;QACduD;IAAnB,MAAMhD,aAAagD,CAAAA,6BAAAA,CAAAA,wBAAAA,UAAUhD,UAAU,cAApBgD,mCAAAA,KAAAA,IAAAA,sBAAsBxE,IAAI,cAA1BwE,wCAAAA,6BAA8BA,CAAAA,yBAAAA,UAAUhD,UAAU,cAApBgD,oCAAAA,KAAAA,IAAAA,uBAAsB7E,OAAO8B,IAAI,CAAC,IAAI;IAEvF,IAAIiD,SAASlG;IAEb,IAAIgD,eAAevB,QAAQ;QACzByE,SAAS7F,qBAAqB2F,UAAUhD,UAAU,CAAE7B,MAAM;IAC5D,OAAO;YAEOiC;QADZ,MAAM6C,cAAcD,UAAU1C,aAAa,CAACT,IAAI,CAC9C,CAACO,MAAQ,AAACA,CAAAA,CAAAA,YAAAA,IAAI5B,IAAI,cAAR4B,uBAAAA,YAAYA,IAAIjC,MAAM,CAAC8B,IAAI,CAAC,IAAI,AAAD,MAAOxB;QAGlD,IAAIwE,aAAa;YACfC,SAAS7F,qBAAqB4F,YAAY9E,MAAM;QAClD,CAAC;IACH,CAAC;IAED,OAAO,CAACgF,YAAuB,CAAA;YAC7B,CAAC1E,OAAO,EAAEyE,OAAOC;QACnB,CAAA;AACF"}