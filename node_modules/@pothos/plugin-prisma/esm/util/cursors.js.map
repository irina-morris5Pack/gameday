{"version":3,"sources":["../../src/util/cursors.ts"],"names":["decodeBase64","encodeBase64","getModel","DEFAULT_MAX_SIZE","DEFAULT_SIZE","formatCursorChunk","value","Date","String","Number","TypeError","formatPrismaCursor","record","fields","cursorFormatter","JSON","stringify","map","name","parsePrismaCursor","cursor","decoded","type","match","parseInt","parse","BigInt","Error","parseID","id","dataType","parseFloat","Buffer","from","getDefaultIDSerializer","modelName","fieldName","builder","model","field","find","f","parent","serializeID","primaryKey","join","n","kind","idx","index","uniqueIndexes","getDefaultIDParser","parts","Array","isArray","result","i","length","toString","parseCompositeCursor","parsed","forEach","prismaCursorConnectionQuery","args","ctx","maxSize","defaultSize","parseCursor","before","after","first","last","maxSizeForConnection","defaultSizeForConnection","take","Math","min","skip","wrapConnectionResult","results","totalCount","resolveNode","edges","gotFullResults","abs","hasNextPage","hasPreviousPage","nodes","slice","node","pageInfo","startCursor","endCursor","resolvePrismaCursorConnection","options","resolve","query","getCursorFormatter","modelData","uniqueIndex","getCursorParser","parser","rawCursor"],"mappings":"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"}